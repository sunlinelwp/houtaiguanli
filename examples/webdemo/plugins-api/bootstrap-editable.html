<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta content="width=device-width, initial-scale=1.0" name="viewport" />
		<meta http-equiv="Content-type" content="text/html; charset=utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">

		<link href="../plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
		<link href="../plugins/bootstrap-editable/bootstrap-editable/css/bootstrap-editable.css" rel="stylesheet" type="text/css" />
		<link rel="stylesheet" href="../plugins/font-awesome/css/font-awesome.min.css">
		
		<script src="../plugins/jquery-1.11.0.min.js" type="text/javascript"></script>
		<script src="../plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
		<script src="../plugins/bootstrap-editable/bootstrap-editable/js/bootstrap-editable.js" type="text/javascript"></script>
		
		<title>bootstrap-datepicker</title>
		<style>
			body { padding-top: 50px; }
		</style>
	</head>
	<body>
		 <nav class="navbar navbar-default navbar-fixed-top" role="navigation" id="nav">
       </nav>
       	<script src="../plugins-js/navigation.js" type="text/javascript"></script>
		 <script>
		 jQuery(document).ready(function() { 
			navigation.init(); 
			});
		</script>
		<div class="bs-docs-header">
			<div class="container">
				<h1>bootstrap-editable 是一个小型的 JavaScript 库用来日期选择控件，基于 Twitter 的 Bootstrap 开发。</h1>
			</div>
		</div>
		<div class="container bs-docs-container">
			<div class="row">
				<div class="col-md-9" role="main">
					<h2>集成</h2>
					<pre>&lt;link href="path/to/bootstrap/css/bootstrap.css" rel="stylesheet">
&lt;script src="path/to/jquery/jquery-1.8.2.min.js">&lt;/script>
&lt;script src="path/to/bootstrap/js/bootstrap.min.js">&lt;/script>

&lt;link href="path/to/bootstrap-editable/css/bootstrap-editable.css" rel="stylesheet">
&lt;script src="path/to/bootstrap-editable/js/bootstrap-editable.min.js">&lt;/script></pre>
					<br/>
					<hr />
					<h2>用法</h2>
					<h3>Text</h3>
					<p> Just create <code>&lt;A&gt;</code> element</p>
					<pre class="prettyprint linenums">&lt;a href=&quot;#&quot; id=&quot;username&quot;&gt;superuser&lt;/a&gt;</pre> 
					<p>and apply <code>editable()</code> method</p>
					<pre class="prettyprint linenums">$('#username').editable({
	type:  'text',
	pk:    1,
	name:  'username',
	url:   'post.php',  
	title: 'Enter username'
});</pre> 
					<p>Demo</p>
					<div  style="margin-left:200px;">
						<a href="#" id="username">superuser</a>
					</div>
					<script>
					$('#username').editable({
					   type:  'text',
					   pk:    1,
					   name:  'username',
					  /* url:   'post.php',  */
					   title: 'Enter username'
					});
					</script>
					<br>
					<p>Alternatively, you can set all the same options via <code>data-*</code> attributes</p>  
                        <pre class="prettyprint linenums">&lt;a href=&quot;#&quot; id=&quot;username&quot; data-type=&quot;text&quot; data-pk=&quot;1&quot; data-name=&quot;username&quot; data-url=&quot;post.php&quot; data-original-title=&quot;Enter username&quot;&gt;superuser&lt;/a&gt;</pre> 
                        <pre class="prettyprint linenums">$('#username').editable();</pre>
						<h3>Textarea</h3>
						
                        <p>Very similar to <i>text</i>, just set <code>type</code> to <i>textarea</i></p>
                        <pre class="prettyprint linenums">&lt;a href=&quot;#&quot; id=&quot;comments&quot;&gt;awesome&lt;br&gt;user!&lt;/a&gt;</pre> 
                        <pre class="prettyprint linenums">$('#comments').editable({
   type:  'textarea',
   pk:    1,
   name:  'comments',
   url:   'post.php',  
   title: 'Enter comments'
});</pre>
					<a href="#" id="comments">awesome<br>user!</a>
					<script>
						$('#comments').editable({
                           type:  'textarea',
                           pk:    1,
                           name:  'comments',
                          /* url:   'post.php',  */
                           title: 'Enter comments'
                        });
					</script>
					<br>
					<h3>Select</h3>
                        <p>For <i>select</i> element additionally set <code>data-source</code> and <code>data-value</code></p>
                        <pre class="prettyprint linenums">&lt;a href=&quot;#&quot; id=&quot;group&quot; data-type=&quot;select&quot; data-name=&quot;group&quot; data-pk=&quot;1&quot; data-value=&quot;5&quot; data-source=&quot;groups.php&quot; data-original-title=&quot;Select group&quot;&gt;Admin&lt;/a&gt;</pre>
                        <pre class="prettyprint linenums">$('#group').editable();</pre>
					<a href="#" id="group" data-type="select" data-name="group" data-pk="1" data-value="5"  data-original-title="Select group">Admin</a>
					<script>
						$('#group').editable({
							source : {'1':'Monic','2':'Shom','3':'Jack','4':'Poke','5':'Jamse','6':'Rose'}
						});
					</script>
					<br />
					
					<h3>Date</h3>
					<p>Date is based on <a href="http://vitalets.github.com/bootstrap-datepicker/" >bootstrap-datepicker</a> that is improved fork of <a href="https://github.com/eternicode/bootstrap-datepicker" >eternicode's project</a>. 
					Use <code>format</code> and <code>viewformat</code> options to define how date will be stored and displayed</p>
					<pre class="prettyprint linenums">&lt;a href=&quot;#&quot; id=&quot;dob&quot; data-format=&quot;dd.mm.yyyy&quot;&gt;15.05.1984&lt;/a&gt;</pre>
					<pre class="prettyprint linenums">$('#dob').editable({
	type:  'date',
	pk:    1,
	name:  'dob',
	url:   'post.php',  
	title: 'Select Date of birth'
});</pre> 
					<div  style="margin-left:200px;">
						<a href="#" id="dob" data-format="yyyy-mm-dd">2014-11-12</a>
					</div>
					<script>
						$('#dob').editable({
							type:  'date',
							pk:    1,
							name:  'dob',
							/*url:   'post.php',*/  
							title: 'Select Date of birth'
						});
					</script>
					<br>
					<section id="options"><hr></section>                    
                        <h2>Options</h2>
                        <p>List of all possible options</p>
                        <table class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th style="width: 100px;">Name</th>
                                    <th style="width: 100px;">type</th>
                                    <th style="width: 50px;">default</th>
                                    <th>description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>type</td>
                                    <td>string</td>
                                    <td>'text'</td>
                                    <td>input type - text | select | textarea | date</td>
                                </tr>                              
                                <tr>
                                    <td>name</td>
                                    <td>string</td>
                                    <td>null</td>
                                    <td>name of field, required. If not set, will be taken from <b>id</b> attribute.</td>
                                </tr> 
                                <tr>
                                    <td>pk</td>
                                    <td>string | function</td>
                                    <td>null</td>
                                    <td>primary key of editable object (e.g. record id in database). Can be css selector or function to get id dynamically, e.g.:<br>
                                       <pre class="prettyprint linenums">function() {
    return $('#user_id').text();
}</pre>
                                    </td>
                                </tr>   
                                <tr>
                                    <td>value</td>
                                    <td>string</td>
                                    <td>element's text</td>
                                    <td>initial value. Should be defined for <i>select</i> type to store id of shown text</td>
                                </tr>                                                                                          
                                <tr>
                                    <td>params</td>
                                    <td>object</td>
                                    <td>null</td>
                                    <td>additional params to submit</td>
                                </tr>                                
                                <tr>
                                    <td>url</td>
                                    <td>string</td>
                                    <td>null</td>
                                    <td>url to submit data via ajax. Sending pk, name, value and params</td>
                                </tr>
                                <tr>
                                    <td>emptytext</td>
                                    <td>string</td>
                                    <td>'Empty'</td>
                                    <td>text shown on empty elements</td>
                                </tr>
                                <tr>
                                    <td>inputclass</td>
                                    <td>string</td>
                                    <td>'span2'</td>
                                    <td>Css class for input - span1 | span2 | span3 | span4</td>
                                </tr>                                
                                <tr>
                                    <td>toggle</td>
                                    <td>string | jQuery</td>
                                    <td>null</td>
                                    <td>element that toggles popover by click. By default element itself. Can be CSS selector or HTML, e.g. <code>data-toggle="#pencil"</code></td>
                                </tr>                                
                                <tr>
                                    <td>send</td>
                                    <td>string</td>
                                    <td>'auto'</td>
                                    <td>strategy for sending data on server - auto | always | never. <br>'auto' = data will be sent only if <strong>pk</strong> defined, otherwise will be stored in element</td>
                                </tr>
                                <tr>
                                    <td>placement</td>
                                    <td>string | function</td>
                                    <td>'top'</td>
                                    <td>how to position the popover - top | bottom | left | right</td>
                                </tr>    
                                <tr>
                                    <td>enablefocus</td>
                                    <td>bool</td>
                                    <td>false</td>
                                    <td>wether to return focus on element after popover is closed. This allows fully keyboard input, but focused links may look not pretty</td>
                                </tr>
                                <tr>
                                    <td>autotext</td>
                                    <td>string</td>
                                    <td>'auto'</td>
                                    <td>can be auto | always | never. Allows to automatically set element's text based on it's value. Usefull for <i>select</i> and <i>date</i>. E.g.:
                                    <pre class="prettyprint linenums">&lt;a href=&quot;#&quot; id=&quot;group&quot; data-type=&quot;select&quot; data-value=&quot;1&quot; data-source=&quot;{1: 'User', 2: 'Admin'}&quot; &gt;&lt;/a&gt;</pre>
                                    Content of element above is empty, but when apply <i>editable</i> it will be set to <i>'User'</i>, because provided value is <code>1</code>
                                    <pre class="prettyprint linenums">$('#group').editable();</pre>  
                                    <code>auto</code> means text will be set only if element is empty and <i>source</i> defined as object (no extra request).<br>
                                    <code>always|never</code> means always(never) try to set element's text<br>
                                    </td>
                                </tr> 
                                <tr>
                                    <td>template</td>
                                    <td>string</td>
                                    <td>depends on type</td>
                                    <td>html template used for input inside popover. Allows to do whatever with input: 
                                      <pre class="prettyprint linenums">$('#comments').editable({
template: '&lt;textarea rows="12"&gt;&lt;/textarea&gt;'
});</pre>
                                    </td>
                                </tr>                                                                                                 
                                <tr>
                                    <td>validate</td>
                                    <td>function | object</td>
                                    <td>null</td>
                                    <td>function for client-side validation. If returns string - means validation not passed and string showed as error. 
                                        E.g.:
                                        <pre class="prettyprint linenums">validate: function(value) {
  if($.trim(value) == '') 
    return 'This field is required';
}</pre>
Definition as object is usefull when applying editable to several elements and difference is only in validation. Object structure is <code>name: function</code>, e.g.
<pre class="prettyprint linenums">
validate: {
    username: function(v) {...},
    fullname: function(v) {...}
}</pre>
</td>
                                </tr>
                                <tr>
                                    <td>success</td>
                                    <td>function</td>
                                    <td>null</td>
                                    <td>called after success submit. If returns string - means error occured and string is shown as error. Parameters equals to <code>$.ajax()</code> success callback. Can be used to deal with json returned from server.
                                    E.g.:
                                        <pre class="prettyprint linenums">function(data) {
    if(typeof data == 'object' && !data.success) return data.msg;  
}</pre>
By default any submit request returning http status = 200 considered successful, and status != 200 considered error.
</td>
                                   
                                </tr>
                                
                                <tr>
                                    <td>error</td>
                                    <td>function</td>
                                    <td>null</td>
                                    <td>called on ajax error when submitting data. If returns string - it will be shown as error message. Parameters equals to <code>$.ajax()</code> error callback. Can be used for special error handling. E.g.:
                                        <pre class="prettyprint linenums">function(xhr) {
    if(xhr.status == 500) return 'Internal server error';  
}</pre>
By default response text will be shown as error message.
</td>
                                    
                                </tr>                                
                                
                            </tbody>
                        </table>
					<div class="alert alert-info">
						<strong>Tip! </strong>If you need one option for all editable fields you can define it in defaults:  <br>
						<pre class="prettyprint linenums">$.fn.editable.defaults.success = function(data) { ... }</pre> 
					</div>
					
					<h2>Type specific options</h2>
                        <p>There are additional options for different input types</p> 
                        <h3>Text & Textarea</h3> 
                        <table class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th style="width: 100px;">Name</th>
                                    <th style="width: 100px;">type</th>
                                    <th style="width: 50px;">default</th>
                                    <th>description</th>
                                </tr>
                            </thead>
                            <tbody> 
                                <tr>
                                    <td>placeholder</td>
                                    <td>string</td>
                                    <td>null</td>
                                    <td>text shown if input is empty</td>
                                </tr> 
                            </tbody>
                        </table>
                        
                        <h3>Select</h3> 
                           <table class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th style="width: 100px;">Name</th>
                                    <th style="width: 100px;">type</th>
                                    <th style="width: 50px;">default</th>
                                    <th>description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>source</td>
                                    <td>string | object</td>
                                    <td>null</td>
                                    <td>source for data in select element. If string - considered url for ajax to load items. Otherwise should be json. 
                                    E.g. <code>data-source="groups.php"</code> or <br><code>data-source="{'M': 'male', 'F': 'female'}"</code>  
                                    </td>
                                </tr>     
                                <tr>
                                    <td>prepend</td>
                                    <td>string | object</td>
                                    <td>false</td>
                                    <td>allows to prepend values in select list.<br>E.g. if set <code>prepend: 'Not defined'</code> then new value <code>{'': 'Not defined'}</code> will be automatically inserted at the begining of select list</td>
                                </tr>   
                                <tr>
                                    <td>loadingError</td>
                                    <td>string</td>
                                    <td>'Error when loading options'</td>
                                    <td>Message shown when options can't be loaded</td>
                                </tr>                                                                                             
                            </tbody>
                           </table>                         
               
                        <h3>Date</h3> 
                           <table class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th style="width: 100px;">Name</th>
                                    <th style="width: 60px;">type</th>
                                    <th style="width: 180px;">default</th>
                                    <th>description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>format</td>
                                    <td>string</td>
                                    <td>yyyy-mm-dd</td>
                                    <td>format used for <strong>submitting date to server</strong>. Combination of d, dd, m, mm, yy, yyyy. </td>
                                </tr> 
                                <tr>
                                    <td>viewformat</td>
                                    <td>string</td>
                                    <td>equals to <i>format</i></td>
                                    <td>format used for <strong>displaying date</strong>. Combination of d, dd, m, mm, yy, yyyy. </td>
                                </tr> 
                                
                                 <tr>
                                    <td>weekStart</td>
                                    <td>integer</td>
                                    <td>0</td>
                                    <td>day of the week start. 0 for Sunday - 6 for Saturday</td>
                                </tr>   
                                 <tr>
                                    <td>startView</td>
                                    <td>string</td>
                                    <td>0, 'month'</td>
                                    <td>The view that the datepicker should show when it is opened. Accepts values of 0 or 'month' for month view (the default), 1 or 'year' for the 12-month overview, and 2 or 'decade' for the 10-year overview. Useful for date-of-birth datepickers</td>
                                </tr>                                  
                                <tr>
                                    <td>datepicker</td>
                                    <td>object</td>
                                    <td>null</td>
                                    <td>Full <a href="http://vitalets.github.com/bootstrap-datepicker/" target="_blank">configuration</a> of datepicker. Some most used options from here are dublicated above for convenience</td>
                                </tr>     
                            </tbody>
                           </table>                         
                        
                        <section id="events"><hr></section>
                        <h2>Events</h2>
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th style="width: 150px;">Event</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>init</td>
                                    <td>fired when editable was initialized. To access editable itself use second parameter:
<pre class="prettyprint linenums">$('#username').on('init', function(e, editable) {
    alert('Initialized with value: ' + editable.value);
});</pre>      
Should be attached to element <i>before</i> applying <code>$().editable()</code>.                              
                                    </td>
                                </tr>
                                <tr>
                                    <td>update</td>
                                    <td>fired when editable has been successfully updated with new value:
<pre class="prettyprint linenums">$('#username').on('update', function(e, editable) {
    alert('new value: ' + editable.value);
});</pre>                                      
                                    </td>
                                </tr>   
                                <tr>
                                    <td>render</td>
                                    <td>fired each time when text of element is rendered (initially and after each ajax update). Can be used for custom formatting of element's text:
<pre class="prettyprint linenums">$('#action').on('render', function(e, editable) {
    var colors = {0: "gray", 1: "green", 2: "blue", 3: "red"};
    $(this).css("color", colors[editable.value]); 
});</pre>   
Property <code>e.isInit</code> defines wether it is initial render or render after update.                                    
                                    </td>
                                </tr>   
                                <tr>
                                    <td>shown</td>
                                    <td>fired when popover is shown (for select will wait for loading dropdown options).
                                    </td>
                                </tr>                                                                                             
                                <tr>
                                    <td>hidden</td>
                                    <td>fired when popover is closed.
                                    </td>
                                </tr>                                                                                             
                            </tbody>
                        </table> 
                                         
                        
                        <section id="methods"><hr></section>
                        <h2>Methods</h2>
                        <h4>$().editable(options)</h4>
                        <p>Initializes an editable.</p>
                        <br>

                        <h4>.editable('show')</h4>
                        <p>Shows editable popover manually.</p>
                        <br>
                                             
                        <h4>.editable('hide')</h4>
                        <p>Hides editable popover manually.</p>
                        <br>
                        
                        <h4>.editable('option', nameOrObject, [value]) <span class="label label-success">New</span></h4>
                        <p>Set one or several options.</p>
                        <pre class="prettyprint linenums">$('#username, #fullname').editable('option', 'pk', 123);</pre>
                        <pre class="prettyprint linenums">$('#username, #fullname').editable('option', {pk: 123});</pre>
                        <br>                        
                        
                        <p><span class="muted">Below methods are mainly for <strong>creating new records</strong> (details in next section)</span></p>
                        <h4>.editable('validate')</h4>
                        <p>Will call validate method for each editable in array. Returns object with names and validation messages, e.g.:</p>
                        <pre class="prettyprint linenums">$('#username, #fullname').editable('validate');
/* possible result:
{
    username: "username is requied",
    fullname: "fullname should be minimum 3 letters length"
}
*/</pre>
                        <h4>.editable('getValue')</h4>
                        <p>Returns current values for one or several editable elements. If value is <code>null</code> or <code>undefined</code> it will not be returned.</p>
                        <pre class="prettyprint linenums">$('#username, #fullname').editable('validate');
/* possible result:
{
    username: "superuser",
    fullname: "John"
}
*/</pre>


                        <h4>.editable('markAsSaved')</h4>
                        <p>Mark editable as saved to server (removes class "editable-changed" and updates <i>lastSavedValue</i> of editable).</p>
                        <pre class="prettyprint linenums">$('#username, #fullname').editable('markAsSaved');</pre>                        
                        <br>
                        
                        <h4>.editable('submit', config) <span class="label label-success">New</span></h4>
                        <p>This method is combination of <code>validate</code>, <code>getValue</code> and <code>markAsSaved</code> working together in more or less standart way. 
                        When applied it runs validation for matched editable elements and if no errors - submits data to provided url.
                        It's configuration contains following options:
                        </p>
                        <table class="table table-bordered table-striped table-condensed">
                            <thead>
                                <tr>
                                    <th style="width: 100px;">Option name</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>url</td>
                                    <td>url for ajax submit</td>
                                </tr> 
                                <tr>
                                    <td>data</td>
                                    <td>additional data to submit</td>
                                </tr> 
                                <tr>
                                    <td>success</td>
                                    <td>callback applied on successful creation of new record</td>
                                </tr>                                
                                <tr>
                                    <td>error</td>
                                    <td>callback applied on any error (including client-side and server-side validation errors)</td>
                                </tr>                                
                            </tbody>
                        </table> 
                        <p>There are four possible scenarios:<p>
                        <ul>
                            <li>
                                <strong>successful record creation</strong><br>
                                Server response pattern must be: <code>{id: &lt;new-record-id&gt;}</code>.
                                <i>id</i> will be automatically stored into <code>pk</code> value of all editables and they will start working in regular way. 
                                Will be called <i>success()</i> callback with response object in param.
                            </li>                        
                            <li>
                                <strong>client-side validation error</strong><br>
                                Will be called <i>error()</i> callback with errors object in param. 
                            </li>
                            <li>
                                <strong>server-side validation error</strong><br>
                                Server response pattern must <strong>not</strong> be like: <code>{id: &lt;something&gt;}</code>. Good solution is response like <code>{errors: &lt;object with error messages&gt;}</code>
                                 to have silimar handling of server-side and client-side validation errors. 
                                Will be called <i>error()</i> callback with errors object in param. 
                            </li>
                            <li>
                                <strong>ajax error, http status != 200</strong><br>
                                Will be called <i>error()</i> callback with xhr object in param. 
                            </li>

                        </ul>
                           
                        <p>Example code:</p>                    
                        <pre class="prettyprint linenums">$('#username, #fullname').editable('submit', {
    url: 'new.php',              
    data: {custom: 'text'},     
    success: function(data) {
        /* actions on success */
    },
    error: function(data) {
        /* actions on validation error (or ajax error) */
        var msg = '';
        if(data.errors) {              //validation error
            $.each(data.errors, function(k, v) { msg += k+": "+v+"&lt;br&gt;"; });  
        } else if(data.responseText) {   //ajax error
            msg = data.responseText; 
        }
    }
});</pre>
				</div>	
			</div>
		</div>
	</body>
</html>